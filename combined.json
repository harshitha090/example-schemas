{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "age": {
      "type": "integer",
      "minimum": 18,
      "maximum": 99
    },
    "float": {
      "type": "number",
      "minimum": -3.4028235e+38,
      "maximum": 3.4028235e+38
    },
    "address": {
      "type": "object",
      "properties": {
        "street": { "type": "string" },
        "city": { "type": "string" },
        "state": { "type": "string" },
        "postalCode": { "type": "string" },
        "country": { "type": "string" }
      },
      "required": ["street", "city", "state", "postalCode", "country"]
    },
    "user_profile": {
      "type": "object",
      "properties": {
        "name": { "type": "string", "minLength": 3 },
        "age": { "$ref": "#/definitions/age" },
        "balance": { "$ref": "#/definitions/float" }
      },
      "required": ["name", "age"]
    },
    "system": {
      "type": "object",
      "properties": {
        "machine_name": { "type": "string", "minLength": 1 },
        "systemId": { "type": "integer", "minimum": 1 },
        "loadCapacity": { "$ref": "#/definitions/float" },
        "components": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1
        },
        "efficiency": { "$ref": "#/definitions/float" }
      },
      "required": ["machine_name", "systemId", "loadCapacity"],
      "additionalProperties": false
    },
    "user": {
      "type": "object",
      "properties": {
        "profile": { "$ref": "#/definitions/user_profile" },
        "address": { "$ref": "#/definitions/address" },
        "rating": { "type": "number", "minimum": 0.0, "maximum": 5.0 }
      },
      "required": ["profile", "address"]
    },
    "draft7": {
      "type": "object",
      "properties": {
        "username": { "type": "string", "minLength": 3, "maxLength": 30 },
        "email": { "type": "string", "format": "email" },
        "password": { "type": "string", "minLength": 8 },
        "age": { "$ref": "#/definitions/age" },
        "score": { "$ref": "#/definitions/float" }
      },
      "required": ["username", "email", "password"],
      "additionalProperties": false
    }
  },
  "properties": {
    "draft7": {
      "$ref": "#/definitions/draft7"
    },
    "system": {
      "$ref": "#/definitions/system"
    },
    "user": {
      "$ref": "#/definitions/user"
    }
  },
  "required": ["draft7", "system", "user"]
}
